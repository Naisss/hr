
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>用户管理</title>
    <link href="~/css/table.css" rel="stylesheet" />
    <script src="~/javascript/jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(function()
        {
            var currentPage = 1;
            var pages = "";
               $.ajax
               ({
               url: "/Quanxian/Show",
               type: "post",
               data:{cr:currentPage},
               success: function (data) {
                   var di = eval("(" + data + ")");
                   var dt = di["dt"];
                   pages = di["pages"];
                   var rows = di["rows"];
                   $("#tb tr:gt(0)").remove();
                   for (var i=0;i<dt.length;i++) {
                       $tr = $("<tr></tr>");
                       $td1 = $('<td class="TD_STYLE2">' + dt[i]["u_id"] + '</td>');
                       $td2 = $('<td class="TD_STYLE2">' + dt[i]["u_name"] + '</td>');
                       $td3 = $('<td class="TD_STYLE2">' + dt[i]["u_true_name"] + '</td>');
                       $td4 = $('<td class="TD_STYLE2">' + dt[i]["u_password"] + '</td>');
                       $td5 = $('<td class="TD_STYLE2">' + dt[i]["RoleName"] + '</td>');                 
                       $td6 = $('<td class="TD_STYLE2"><a href="/Quanxian/Update/' + dt[i]["u_id"] + '">修改</a><a href="/Quanxian/Del/' + dt[i]["u_id"] + '">删除</a></td>');
                       $tr.append($td1, $td2, $td3, $td4, $td5, $td6);
                       $("#tb").append($tr);
                       $("#page").text(currentPage);
                       $("#count").text("当前角色总数：" + rows + "例");
                   }
               }
               })
               $("#first").click(function () {
                   currentPage = 1;
                   $.ajax({
                       url: "/Quanxian/Show",
                       type: "post",
                       data: { cr: currentPage },
                       success: function (msg) {
                           var di = eval("(" + msg + ")");
                           var dt = di["dt"];
                           var rows = di["rows"];
                           $("#tb tr:gt(0)").remove();
                           for (var i = 0; i < dt.length; i++) {
                               $tr = $("<tr></tr>");
                               $td1 = $('<td class="TD_STYLE2">' + dt[i]["u_id"] + '</td>');
                               $td2 = $('<td class="TD_STYLE2">' + dt[i]["u_name"] + '</td>');
                               $td3 = $('<td class="TD_STYLE2">' + dt[i]["u_true_name"] + '</td>');
                               $td4 = $('<td class="TD_STYLE2">' + dt[i]["u_password"] + '</td>');
                               $td5 = $('<td class="TD_STYLE2">' + dt[i]["RoleName"] + '</td>');
                               $td6 = $("<td class='TD_STYLE2'><a href='/Quanxian/Update/" + dt[i]["u_id"] + "'>修改</a><a href='/Quanxian/Del/" + dt[i]["u_id"] + "'>删除</a></td>");
                               $tr.append($td1, $td2, $td3, $td4, $td5, $td6);
                               $("#tb").append($tr);
                               $("#page").text(currentPage);
                               $("#count").text("当前角色总数：" + rows + "例");
                           }
                       }
                   });
               });
               $("#prev").click(function () {
                   currentPage--;
                   $.ajax({
                       url: "/Quanxian/Show",
                       type: "post",
                       data: {cr:currentPage},
                       success: function (msg) {
                           var di = eval("(" + msg + ")");
                           var dt = di["dt"];
                           var rows = di["rows"];
                           $("#tb tr:gt(0)").remove();
                           for (var i = 0; i < dt.length; i++) {
                               $tr = $("<tr></tr>");
                               $td1 = $('<td class="TD_STYLE2">' + dt[i]["u_id"] + '</td>');
                               $td2 = $('<td class="TD_STYLE2">' + dt[i]["u_name"] + '</td>');
                               $td3 = $('<td class="TD_STYLE2">' + dt[i]["u_true_name"] + '</td>');
                               $td4 = $('<td class="TD_STYLE2">' + dt[i]["u_password"] + '</td>');
                               $td5 = $('<td class="TD_STYLE2">' + dt[i]["RoleName"] + '</td>');
                               $td6 = $("<td class='TD_STYLE2'><a href='/Quanxian/Update/" + dt[i]["u_id"] + "'>修改</a><a href='/Quanxian/Del/" + dt[i]["u_id"] + "'>删除</a></td>");
                               $tr.append($td1, $td2, $td3, $td4, $td5, $td6);
                               $("#tb").append($tr);
                               $("#page").text(currentPage);
                               $("#count").text("当前角色总数：" + rows + "例");
                           }
                       }
                   })       
               })
               $("#next").click(function () {
                   currentPage++;
                   $.ajax({
                       url: "/Quanxian/Show",
                       type: "post",
                       data: { cr: currentPage },
                       success: function (msg) {
                           var di = eval("(" + msg + ")");
                           var dt = di["dt"];
                           var rows = di["rows"];
                           $("#tb tr:gt(0)").remove();
                           for (var i = 0; i < dt.length; i++) {
                               $tr = $("<tr></tr>");
                               $td1 = $('<td class="TD_STYLE2">' + dt[i]["u_id"] + '</td>');
                               $td2 = $('<td class="TD_STYLE2">' + dt[i]["u_name"] + '</td>');
                               $td3 = $('<td class="TD_STYLE2">' + dt[i]["u_true_name"] + '</td>');
                               $td4 = $('<td class="TD_STYLE2">' + dt[i]["u_password"] + '</td>');
                               $td5 = $('<td class="TD_STYLE2">' + dt[i]["RoleName"] + '</td>');
                               $td6 = $("<td class='TD_STYLE2'><a href='/Quanxian/Update/" + dt[i]["u_id"] + "'>修改</a><a href='/Quanxian/Del/" + dt[i]["u_id"] + "'>删除</a></td>");
                               $tr.append($td1, $td2, $td3, $td4, $td5, $td6);
                               $("#tb").append($tr);
                               $("#page").text(currentPage);
                               $("#count").text("当前角色总数：" + rows + "例");
                           }
                       }
                   })
               })
               $("#last").click(function () {
                   currentPage = pages;
                   $.ajax({
                       url: "/Quanxian/Show",
                       type: "post",
                       data: { cr: currentPage },
                       success: function (msg) {
                           var di = eval("(" + msg + ")");
                           var dt = di["dt"];
                           var rows = di["rows"];
                           $("#tb tr:gt(0)").remove();
                           for (var i = 0; i < dt.length; i++) {
                               $tr = $("<tr></tr>");
                               $td1 = $('<td class="TD_STYLE2">' + dt[i]["u_id"] + '</td>');
                               $td2 = $('<td class="TD_STYLE2">' + dt[i]["u_name"] + '</td>');
                               $td3 = $('<td class="TD_STYLE2">' + dt[i]["u_true_name"] + '</td>');
                               $td4 = $('<td class="TD_STYLE2">' + dt[i]["u_password"] + '</td>');
                               $td5 = $('<td class="TD_STYLE2">' + dt[i]["RoleName"] + '</td>');
                               $td6 = $("<td class='TD_STYLE2'><a href='/Quanxian/Update/" + dt[i]["u_id"] + "'>修改</a><a href='/Quanxian/Del/" + dt[i]["u_id"] + "'>删除</a></td>");
                               $tr.append($td1, $td2, $td3, $td4, $td5, $td6);
                               $("#tb").append($tr);
                               $("#page").text(currentPage);
                               $("#count").text("当前角色总数：" + rows + "例");
                           }
                       }
                   })
               })
        })
        //function doDelete(id) 
        //{
        //if (confirm("确定删除此用户吗？"))
        //{
	    //location.href = "success.html?users.userId=" + id;
		//}
	    //}
    </script>
</head>
<body>
    @*@{int rows = ViewBag.rows;}*@
    <table width="100%" >
        <tr>
            <td>
                <font color="black">您正在做的业务是：人力资源--权限管理--用户管理 </font>
            </td>
        </tr>
        <tr>
            <td id="count"></td>
        </tr>
        <tr>
            <td align="right">
             <a   href="/Quanxian/Add">   <input type="submit" value="添加用户" class="BUTTON_STYLE1"></a>
            </td>
        </tr>
    </table>
    <table width="100%" border="1" cellpadding=5 cellspacing=1
           bordercolorlight=#848284 bordercolordark=#eeeeee
           class="TABLE_STYLE1" id="tb">
        <tr class="TR_STYLE1">
            <td class="TD_STYLE1">
                用户编号
            </td>
            <td class="TD_STYLE1">
                用户名称
            </td>
            <td class="TD_STYLE1">
                真实姓名
            </td>
            <td class="TD_STYLE1">
                用户密码
            </td>
            <td class="TD_STYLE1">
                用户身份
            </td>
            <td class="TD_STYLE1">
                操作
            </td>
        </tr>
    </table>
    <p style="text-align:center;">
        <a   style="color:black;" id="first">首页</a>
        <a   style="color:black;" id="prev">上一页</a>
        <font color="red" id="page"></font>
        <a   style="color:black;" id="next">下一页</a>
        <a   style="color:black;" id="last">尾页</a>
    </p>
</body>
</html>
