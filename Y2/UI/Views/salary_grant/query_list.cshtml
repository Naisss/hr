
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link href="~/css/cwcalendar.css" rel="stylesheet" />
    <link href="~/css/table.css" rel="stylesheet" />
    <script src="~/javascript/jquery-1.7.2.js"></script>
    <script src="~/javascript/vue.js"></script>
    <title>query_list</title>
    <script type="text/javascript">
        var currentPage = 1;//当前页
        var pageSize = 2;//每页显示多少条数据
        var page = 1;
        var vm = null;
        $(function () {
            vm = new Vue({
                el: "#table",
                data: {
                    mun: null,
                    pageS: null,
                    daaS: null,
                    currentPage: null,
                    Total:null
                },
                methods: {
                    load: function () {
                        var lo = this;
                        $.ajax({
                            url: "/salary_grant/query_list1",
                            type: "get",
                            data: "pageSize=" + pageSize + "&currentPage=" + currentPage,
                            success: function (mag) {
                                var da = eval("(" +mag + ")");
                                var daa = da["dt"];
                                lo.mun = daa;
                                if (da["row"] / pageSize > parseInt(da["row"] / pageSize)) {  //  总数      除以  每页显示多少条数据 >1  如果是有点数就加1
                                    page = parseInt(da["row"] / pageSize) + 1;

                                } else if (da["row"] == 1) {  //刚好除尽
                                    page = 1;

                                }else{
                                    page = parseInt(da["row"] / pageSize);
                                }
                                lo.pageS = page;
                                lo.daaS = daa.length;
                                lo.currentPage = currentPage;
                                lo.Total = da["row"];
                            }

                        })
                    }
                }
                }
            )
            vm.load();
        })

        $(function () {

            $(document).on("click ", "#first1", function () {

                currentPage = 1;
                vm.load();
            })
            $(document).on("click ", "#prev1", function () {
                if (currentPage > 1) {
                    currentPage--;
                }
                vm.load();

            })
            $(document).on("click ", "#next1", function () {
                if (currentPage < page) {
                    currentPage++;
                }
                vm.load();
            })
            $(document).on("click ", "#last1", function () {
                currentPage = page;
                vm.load();
            })
            $(document).on("click ", "#dj", function () {
                var qs = document.getElementById("page").value;
                if (qs <= page) {
                    currentPage = qs;
                    vm.load();


                }

            })
        })
    </script>
</head>
<body>
    @*<form action="/HR_Fist/salaryGrant/salaryGrantAction!toQueryListByPage">*@
        <div id="table">
            <table width="100%">

                <tr>
                    <td style="text-align:left;">
                        <font color="black">您正在做的业务是:人力资源管理--薪酬发放管理--薪酬发放查询</font>
                    </td>
                </tr>
                <tr>
                    <td>
                        &nbsp;
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>
                </tbody>
            </table>
            <table bordercolorlight="#848284" bordercolordark="#eeeeee" class="TABLE_STYLE1" width="100%" cellspacing="1" cellpadding="0" border="1">
                <tbody>
                    <tr>
                        <td class="TD_STYLE1" width="20%">
                            <span>薪酬编号</span>
                        </td>
                        <td class="TD_STYLE1" width="15%">
                            <span>I级机构名称</span>
                        </td>
                        <td class="TD_STYLE1" width="15%">
                            <span>II级机构名称</span>
                        </td>
                        <td class="TD_STYLE1" width="15%">
                            <span>III级机构名称</span>
                        </td>
                        <td class="TD_STYLE1" width="10%">
                            <span>人数</span>
                        </td>
                        <td class="TD_STYLE1" width="20%">
                            基本薪酬总额(元)
                        </td>

                    </tr>


                    <tr class="TD_STYLE2" v-for="(item,i) in mun">
                        <td>
                            <a  :href="'/salary_grant/query?id='+item.salary_grant_id+''">{{item.salary_grant_id}}</a>
                  
                        </td>
                        <td v-if="item.first_kind_name!==NULL">
                            {{item.first_kind_name}}
                        </td>
                        <td v-if="item.second_kind_name!==NULL">{{item.second_kind_name}}</td>
                        <td v-if="item.third_kind_name!==NULL">{{item.third_kind_name}}</td>

                        <td>
                            {{item.human_amount}}

                        </td>
                        <td>
                            {{item.salary_paid_sum}}
                        </td>

                    </tr>


            </table>

            <p>
            </p><div style="font-size: 18px;color: gray" align="center">
                &nbsp;&nbsp;总数：
                <font style="color: maroon;font-weight: bold;">{{Total}}</font>
                例
                &nbsp;&nbsp;&nbsp;
                每页显示 <font style="color: maroon;font-weight: bold;">{{daaS}}</font>
                条
                &nbsp;&nbsp;&nbsp;
                当前第 <font style="color: maroon;font-weight: bold;">{{currentPage}}</font>
                页
                &nbsp;&nbsp;&nbsp;共
                <font style="color: maroon;font-weight: bold;">{{pageS}}</font>
                页
                    <a style="color: navy;font-weight: bold" href="javascript:doPage(1)" id="first1">首页</a>

                    <a style="color: navy;font-weight: bold"
                       href="javascript:doPage(0)" id="prev1">上一页</a>

                    <a style="color: navy;font-weight: bold"
                       href="javascript:doPage(0)" id="next1">下一页</a>

                    <a style="color: navy;font-weight: bold"
                       href="javascript:doPage(2)" id="last1">末页</a>
                    &nbsp;&nbsp;&nbsp;跳到第
                    <input id=page type=text value="1" class=input1 size=1>
                    页&nbsp;&nbsp;
                    <input type="image" onclick="dopagebybutton()" src="../../images/go.bmp" width=18 height=18 border=0 id="dj">
                    <input type="hidden" name="page.startPage" id="startpage" value="1">

            </div>
        </div>

        <script type="text/javascript">
function dopagebybutton() {
	var reg = /^[0-9]*[1-9][0-9]*$/;
	if (reg.test(document.getElementById("page").value)) {
		document.getElementById("startpage").value= document.getElementById("page").value;
	} else {
		alert("您的输入有误");
		document.getElementById("page").value = document.getElementById("startpage").value;
	}
	document.forms[0].submit();

}
function doPage(startsize) {
	document.getElementById("startpage").value =startsize;
	document.forms[0].submit();

}
        </script>







    @*</form>*@



</body>
</html>
